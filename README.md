# QuantInvest

量化指标的计算脚本集合，用于股票和指数的技术分析与可视化。

## 功能介绍

### MA60偏离度计算与可视化

该功能用于计算A股和港股主流指数的日级别收盘点位和60日均线的偏离度，并生成可视化图表。

**偏离度计算公式：**
```
偏离度 = (当前日收盘价 - 60日均线收盘价) / 60日均线收盘价
```

**支持的指数：**
- A股：上证指数、沪深300、中证500、创业板指、科创50、中证红利、全指信息、全指医药、全指消费
- 港股：恒生指数、恒生科技指数

## 使用方法

### 环境依赖

- Python 3.7+
- 依赖库：akshare、pandas、matplotlib

### 安装依赖

```bash
pip install akshare pandas matplotlib
```

### 运行脚本

```bash
python3 src/index_ma60_deviation.py
```

## 项目结构

```
QuantInvest/
├── config/
│   ├── __init__.py
│   ├── consts.py          # 常量定义（如起始日期）
│   └── index_code.py      # 指数代码配置
├── pics/                  # 图表输出目录
├── src/
│   └── index_ma60_deviation.py  # MA60偏离度计算脚本
└── README.md
```

## 输出结果

### 图表说明

- **图表文件名格式：** `指数名称MA60偏离度_最新日期.png`
- **图表内容：**
  - 横轴：日期（从配置的起始日期到最新有数据日期）
  - 纵轴：偏离度（以百分比形式显示）
  - 折线：MA60偏离度变化趋势
  - 红色加粗文本：最新数据点的日期和偏离度值

### 图表示例

运行脚本后，会在`pics/`目录下生成所有支持指数的MA60偏离度图表，例如：
- `A股-上证指数MA60偏离度_2026-01-19.png`
- `港股-恒生指数MA60偏离度_2026-01-16.png`

## 配置说明

### 起始日期配置

在`config/consts.py`文件中可以修改数据的起始日期：

```python
START_DATE = "2020-01-01"
```

### 指数配置

在`config/index_code.py`文件中可以添加或修改指数：

```python
index_dict = {
    "A股-上证指数": "sh000001",
    "港股-恒生指数": "hsi",
    # 更多指数...
}
```

## 注意事项

1. 脚本会自动创建`pics/`目录（如果不存在）
2. 图表采用300dpi的高清分辨率
3. 港股数据可能与A股数据的更新频率不同
4. 脚本使用akshare库获取数据，需要确保网络连接正常

## 后续扩展

计划添加更多量化指标计算功能：
- 其他均线（MA20、MA120、MA250）的偏离度计算
- MACD、RSI等技术指标的计算与可视化
- 个股数据的支持
- 数据导出功能